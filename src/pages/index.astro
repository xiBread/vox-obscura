---
import chapters from "../data/chapters.json";
import Layout from "../layouts/Layout.astro";
---

<Layout title="Home">
	<nav class="relative h-svh w-full md:w-1/2 xl:w-1/3">
		<div class="grid size-full divide-y divide-neutral-700/70 backdrop-blur">
			{
				chapters.map((chapter, i) => (
					<a
						class="row group flex origin-left items-center border-r border-r-neutral-700/70 bg-black/50 p-6"
						href={chapter.slug}
					>
						<div class="chapter">
							<span class="font-mono text-xs text-neutral-500">
								&lbrace;0{i + 1}&rbrace;
							</span>

							<div class="*:transition-colors *:duration-300">
								<h2 class="text-lg font-semibold text-neutral-400 group-hover:text-white">
									{chapter.name}
								</h2>

								<p class="text-sm text-neutral-500 group-hover:text-neutral-300">
									{chapter.description}
								</p>
							</div>
						</div>
					</a>
				))
			}
		</div>
	</nav>

	<nav class="absolute bottom-4 right-6 flex gap-x-2 overflow-hidden text-sm">
		<div class="overflow-hidden">
			<a class="font-mono" href="/about">about</a>
		</div>

		<div class="overflow-hidden">
			<span class="text-neutral-500">&mdash;</span>
		</div>

		<div class="overflow-hidden">
			<a class="font-mono" href="/all">index</a>
		</div>
	</nav>
</Layout>

<script>
	import { timeline, stagger } from "motion";
	import { expoInOut } from "../util";

	timeline([
		[
			".row",
			{ scaleX: [0, 1] },
			{ delay: stagger(0.1), duration: 1.5, easing: expoInOut },
		],
		[
			".chapter",
			{ opacity: [0, 1], y: [-24, 0] },
			{ delay: stagger(0.15), duration: 1, at: "-0.5" },
		],
		["#sound-control", { y: [-24, 0] }, { duration: 0.75, at: "-0.5" }],
		[
			"nav:last-of-type > *",
			{ y: [24, 0] },
			{ delay: stagger(0.1), duration: 0.75, at: "-0.5" },
		],
	]);
</script>
